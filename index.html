<!DOCTYPE html>
<html>

<head>
    <script>
        function onButtonClick() {
            console.log('');
            document.getElementById("demo").innerHTML = "Requesting Bluetooth Device...";
            navigator.bluetooth.requestDevice({
            acceptAllDevices: true,
            optionalServices: [0x1800]
            })
                .then(device => {
                    // Human-readable name of the device.
                    console.log(device.name);
                    document.getElementById("demo").innerHTML = "" + device.name;
                    console.log('Connecting to GATT Server...');
                    document.getElementById("demo").innerHTML = "Connecting to GATT Server...";
                    return device.gatt.connect();
                })
                // .then(server => {
                //     log('Getting Battery Service...');
                //     return server.getPrimaryService('battery_service');
                // })
                // .then(service => {
                //     log('Getting Battery Level Characteristic...');
                //     return service.getCharacteristic('battery_level');
                // })
                // .then(characteristic => {
                //     log('Reading Battery Level...');
                //     return characteristic.readValue();
                // })
                // .then(value => {
                //     let batteryLevel = value.getUint8(0);
                //     log('> Battery Level is ' + batteryLevel + '%');
                // })
                .catch(error => {
                    console.log('Argh! ' + error);
                    document.getElementById("demo").innerHTML = "rgh!" + error;
                });

        }

    </script>
    
</head>

<body>
    <div>
        <button class="btn" id="pointerup" onclick="onButtonClick()">Try it</button>
    </div>
    <div id="demo"></div>
    
</body>

</html>
